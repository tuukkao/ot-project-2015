<div class="feed-template" ng-controller="feedController">
    <div class="feed">
        <div class="post-item panel panel-default" ng-repeat="post in posts">
            <div class="post-header panel-heading" data-id="{{ post._id }}" ng-init="post.hide = true; fetchCommentsForPost(post);" ng-click="post.hide = !post.hide">
                <h4>{{ post.title }} by <a href="#/profile/{{post.author._id}}">{{ post.author.display_name }}</a></h4>
            </div>
            <div class="post-body" ng-class="{ hidden:post.hide,chaldean:!post.hide}">
                <div class="panel-body"><p>{{ post.content }}</p></div>
                <div class="post-footer panel-footer">
                    <p><i>{{ post.created_at | date : 'longDate' }}</i> {{ blog.author.display_name }}</p><br />
                    <p>Tags: <span ng-repeat="tag in post.tags">{{ tag }} </span></p>
                </div>
                <div class="comment-container well well-lg">
                    <h4>Comments:</h4>
                    <div class="comments" ng-repeat="comment in post.comments">
                        <div class="comment" data-id="{{ comment_id }}">
                            <div class="row">
                                <div class="profile-img col-md-1">
                                    <div class="row">
                                        <img src="/images/{{ comment.author.profile_picture }}"/><a href="#/profile/{{comment.author._id}}"><span class="author">{{ comment.author.display_name }}</span></a>
                                    </div>
                                </div>
                                <div class="comment-body well well-sm col-md-11"><p><i>At {{ comment.created_at | date : 'longDate' }}</i>:<br />{{ comment.comment.trim() }}</p></div>
                            </div>
                        </div>
                    </div>
                    <div ng-if="isAuthenticated">
                        <div class="add-comment">
                            <form ng-submit="addComment(post)">
                                <div class="form-group">
                                    <textarea id="comment-content" class="form-control" type="text" ng-model="post.newComment" ></textarea>
                                    <input id="submit-comment" class="btn btn-default" type="submit" value="Add Comment" style="float:right;"/>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div>
